{"version":3,"sources":["webpack:///./src/app/account-details/account-details.module.ts","webpack:///./src/app/account-details/account-details.page.html","webpack:///./src/app/account-details/account-details.page.scss","webpack:///./src/app/account-details/account-details.page.ts","webpack:///./src/app/entities/member.ts"],"names":[],"mappings":"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","file":"account-details-account-details-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AccountDetailsPage } from './account-details.page';\nimport { SharedComponentsModule } from '../components/shared-components.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AccountDetailsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    SharedComponentsModule\n  ],\n  declarations: [AccountDetailsPage]\n})\nexport class AccountDetailsPageModule {}\n","module.exports = \"<app-header></app-header>\\n\\n<ion-content padding class=\\\"background\\\" >\\n  <div *ngIf=isLogin  >\\n\\n      <br/>\\n      <br/>\\n      <br/>\\n      <br/>\\n      <br/>\\n      <br/>\\n      <br/>\\n      <br/>\\n      <br/>\\n      \\n    <ion-card>\\n      <ion-card-content>\\n        \\n          <ion-card-title>{{ member.firstName }} {{ member.lastName }}</ion-card-title>\\n          <ion-card-subtitle>\\n            <br/>\\n            Username: {{ member.username}}<br/>\\n            Points: {{ member.loyaltyPoints }}<br/>\\n            Email: {{ member.email }}<br/>\\n           </ion-card-subtitle>\\n      </ion-card-content>\\n      <!-- <img src =\\\"../../assets/white-sheets.jpg\\\"/> -->\\n      <!-- <div class=\\\"card-title\\\">{{ member.firstName }} {{ member.lastName }}</div>\\n      <div class=\\\"card-subtitle\\\">Username: {{ member.username}}<br/>Points: {{ member.loyaltyPoints }} </div> -->\\n      \\n    </ion-card>\\n    \\n      \\n      <!-- <div *ngIf=\\\"transactions\\\"> -->\\n        <h3><b>Transaction History</b></h3>\\n        <!-- <ion-row *ngFor=\\\"let txn of transactions\\\" class=\\\"activated\\\"> -->\\n          <!-- <ion-col> -->\\n            <div *ngIf=\\\"transactions.length==0\\\" style=\\\"text-align: center\\\">\\n              You have no transactions. (<i>yet</i>)\\n            </div>\\n            <ion-card *ngFor=\\\"let txn of transactions\\\">\\n              <ion-card-content>\\n                <ion-card-title>Transaction ID: {{ txn.saleTransactionId }} </ion-card-title>\\n                <h2>Total : SGD {{ txn.totalPrice }}</h2><br>\\n                <ion-card-subtitle>\\n                  <ion-grid>\\n                    <ion-row>\\n                      <ion-col size=\\\"8\\\">\\n                        <div>\\n                          <b>Item</b>\\n                        </div>\\n                      </ion-col>\\n                      <ion-col>\\n                        <div>\\n                          <b>Subtotal</b>\\n                        </div>\\n                      </ion-col>\\n                    </ion-row>\\n                    <div *ngFor=\\\"let item of txn.saleTransactionLineItems\\\">\\n                      <ion-row>\\n                        <ion-col size=\\\"8\\\">\\n                          <div>\\n                            {{ item.quantity}} {{ item.productEntity.productName}} ({{item.productEntity.colourEnum}})\\n                          </div>\\n                        </ion-col>\\n                        <ion-col style=\\\"text-align: center\\\">\\n                          <div *ngIf=\\\"(item.subTotal/item.quantity)<item.productEntity.unitPrice; else nopromo\\\">\\n                            <s>${{ item.productEntity.unitPrice*item.quantity}}</s>&nbsp;<ion-icon name=\\\"pricetags\\\"></ion-icon> ${{item.subTotal}} \\n                          </div>\\n                          <div>\\n                            <ng-template #nopromo>${{item.subTotal}} </ng-template>\\n                          </div>\\n                        \\n                        </ion-col>\\n                      </ion-row>\\n                    </div>\\n                    </ion-grid>\\n                    \\n                  </ion-card-subtitle>\\n              </ion-card-content>\\n            </ion-card>\\n          <!-- </ion-col> -->\\n        <!-- </ion-row> -->\\n      <!-- </div> -->\\n      <br/><br/><br/>\\n     <ion-grid>\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n            <ion-button color=\\\"dark\\\" expand=\\\"block\\\" (click)= \\\"logout()\\\">\\n              Log Out \\n            </ion-button>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n  </div>\\n  \\n  \\n  <div *ngIf=!isLogin style=\\\"text-align: center\\\" >\\n    <br/>\\n    <br/>\\n    <br/>\\n    <br/>\\n    <br/>\\n    <br/>\\n    <br/>\\n    <br/>\\n    <br/>\\n    <h3><i><b>hi there.</b></i></h3>\\n    <br/>\\n    <h5>Welcome back!</h5>\\n    <!-- <div class=buttons> -->\\n        <ion-button color=\\\"light\\\" [routerLink]=\\\"['/login']\\\" expand=\\\"full\\\">\\n          Log In\\n        </ion-button>\\n    <!-- </div> <br> -->\\n    <h5>If you're new, join us here <ion-icon ios=\\\"ios-arrow-round-down\\\" md=\\\"md-arrow-round-down\\\"></ion-icon></h5>\\n      <ion-button color=\\\"light\\\" [routerLink]=\\\"['/register']\\\" expand=\\\"full\\\">\\n        Sign Up\\n      </ion-button>\\n    \\n  </div>\\n</ion-content>\\n\\n\\n\\n\\n\\n<app-footer></app-footer>\"","module.exports = \"ion-content.background {\\n  --background: url('account.jpg')  no-repeat center center / cover; }\\n\\n.buttons {\\n  width: 70px;\\n  height: 10px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaGVuZ3lhbmcvRGVza3RvcC9JUzMxMDYvemhjcS1jby96aGNxX0lvbmljL3NyYy9hcHAvYWNjb3VudC1kZXRhaWxzL2FjY291bnQtZGV0YWlscy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxpRUFBYSxFQUFBOztBQUdqQjtFQUNJLFdBQVc7RUFDWCxZQUFZLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9hY2NvdW50LWRldGFpbHMvYWNjb3VudC1kZXRhaWxzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50LmJhY2tncm91bmQge1xuICAgIC0tYmFja2dyb3VuZDogdXJsKFwiLi4vLi4vYXNzZXRzL2FjY291bnQuanBnXCIpICBuby1yZXBlYXQgY2VudGVyIGNlbnRlciAvIGNvdmVyO1xufVxuXG4uYnV0dG9uc3tcbiAgICB3aWR0aDogNzBweDtcbiAgICBoZWlnaHQ6IDEwcHg7XG59XG5cbiJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Member } from '../entities/member';\nimport { MemberService } from '../services/member.service';\nimport { Storage } from '@ionic/storage';\nimport { AlertController } from '@ionic/angular';\nimport { SaleTransaction } from '../entities/saletransaction';\nimport { SalestransactionService } from '../services/salestransaction.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-account-details',\n  templateUrl: './account-details.page.html',\n  styleUrls: ['./account-details.page.scss'],\n})\nexport class AccountDetailsPage implements OnInit {\n  errorMessage = '';\n  member = new Member();\n  memberId: number;\n  isLogin: boolean;\n  transactions = new Array<SaleTransaction>();\n\n  constructor(private memberService: MemberService, private storage: Storage,\n    private alertController: AlertController, private saleTransactionService: SalestransactionService,\n    private router: Router) { }\n\n  ngOnInit() {\n    this.storage.get('currentCustomer').then((data) => {\n      this.member = data;\n      this.memberId = this.member.memberId;\n      console.log('lOGGED IN CUSTOMER: ' + this.memberId);\n    });\n    this.storage.get('isLogin').then((data) => {\n      this.isLogin = data;\n      this.retrieveSalesTransactions();\n      this.getMember();\n    });\n  }\n\n\n  ionViewWillEnter() {\n\n  }\n\n  retrieveSalesTransactions() {\n    if (this.isLogin) {\n      this.memberId = this.member.memberId;\n      console.log('member name = ' + this.member.firstName);\n      // this.viewAccountDetails();\n      this.saleTransactionService.retrieveSalesTransactionByUserId(this.member.memberId).subscribe(\n        response => {\n          this.transactions = response.salesTransactions;\n          console.log('transaction Length= ' + this.transactions.length);\n          console.log(this.transactions);\n        },\n        error => {\n          this.errorMessage = error;\n          this.presentAlert(this.errorMessage.substring(37));\n        }\n      );\n    }\n  }\n\n  getMember() {\n    if (this.isLogin) {\n      this.memberService.retrieveMember(this.member.memberId).subscribe(\n        response => {\n          this.member = response.member;\n          console.log(\"Current member id = \" + this.member.memberId);\n        },\n\n        error => {\n          this.errorMessage = error;\n          this.presentAlert(this.errorMessage.substring(37) + \" cannot get member\");\n        }\n      );\n    }\n  }\n\n  async presentAlert(message: string) {\n    const alert = await this.alertController.create({\n      header: message,\n      buttons: ['OK']\n    });\n    await alert.present();\n  }\n\n  async logout() {\n\n    const logoutSuccess = await this.alertController.create({\n      header: 'Successfully Logged Out!',\n      buttons: ['OK']\n    });\n\n    this.isLogin = false;\n    this.storage.set(\"isLogin\", false);\n    this.storage.set(\"currentCustomer\", undefined);\n    logoutSuccess.present();\n\n    this.router.navigate(['/home']);\n\n\n  }\n\n}\n","\nimport { SaleTransaction } from './saletransaction';\nimport { WishList } from './wishlist';\nimport { ShoppingCart } from './cart';\n\n\nexport class Member\n{\n\n    memberId: number;\n    firstName: string;\n    lastName: string;\n    username: string;\n    password: string;\n    loyaltyPoints: number;\n    salt: string;\n    wishList: WishList;\n    saleTransactions: SaleTransaction[];\n    shoppingCart: ShoppingCart;\n    email: string;\n\n\tconstructor(memberId?: number, firstName?: string, lastName?: string, username?: string, password?: string, loyaltyPoints?: number, email?: string, salt?:string, wishList?: WishList, saleTransactions?: SaleTransaction[], shoppingCart?:ShoppingCart)\n\t{\n        this.memberId = memberId;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.username = username;\n        this.password = password;\n        this.loyaltyPoints = loyaltyPoints;\n        this.salt = salt;\n        this.wishList= wishList;\n        this.saleTransactions = saleTransactions;\n        this.shoppingCart = shoppingCart;\n        this.email = email;\n    }\n}"],"sourceRoot":""}