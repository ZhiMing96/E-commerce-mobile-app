<app-header></app-header>

<ion-content padding class="background" >
  <div *ngIf=isLogin  >

      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
      
    <ion-card>
      <ion-card-content>
        
          <ion-card-title>{{ member.firstName }} {{ member.lastName }}</ion-card-title>
          <ion-card-subtitle>
            <br/>
            Username: {{ member.username}}<br/>
            Points: {{ member.loyaltyPoints }}<br/>
            Email: {{ member.email }}<br/>
           </ion-card-subtitle>
      </ion-card-content>
      <!-- <img src ="../../assets/white-sheets.jpg"/> -->
      <!-- <div class="card-title">{{ member.firstName }} {{ member.lastName }}</div>
      <div class="card-subtitle">Username: {{ member.username}}<br/>Points: {{ member.loyaltyPoints }} </div> -->
      
    </ion-card>
    
      
      <!-- <div *ngIf="transactions"> -->
        <h3><b>Transaction History</b></h3>
        <!-- <ion-row *ngFor="let txn of transactions" class="activated"> -->
          <!-- <ion-col> -->
            <div *ngIf="transactions.length==0" style="text-align: center">
              You have no transactions. (<i>yet</i>)
            </div>
            <ion-card *ngFor="let txn of transactions">
              <ion-card-content>
                <ion-card-title>Transaction ID: {{ txn.saleTransactionId }} </ion-card-title>
                <h2>Total : SGD {{ txn.totalPrice }}</h2><br>
                <ion-card-subtitle>
                  <ion-grid>
                    <ion-row>
                      <ion-col size="8">
                        <div>
                          <b>Item</b>
                        </div>
                      </ion-col>
                      <ion-col>
                        <div>
                          <b>Subtotal</b>
                        </div>
                      </ion-col>
                    </ion-row>
                    <div *ngFor="let item of txn.saleTransactionLineItems">
                      <ion-row>
                        <ion-col size="8">
                          <div>
                            {{ item.quantity}} {{ item.productEntity.productName}} ({{item.productEntity.colourEnum}})
                          </div>
                        </ion-col>
                        <ion-col style="text-align: center">
                          <div *ngIf="(item.subTotal/item.quantity)<item.productEntity.unitPrice; else nopromo">
                            <s>${{ item.productEntity.unitPrice*item.quantity}}</s>&nbsp;<ion-icon name="pricetags"></ion-icon> ${{item.subTotal}} 
                          </div>
                          <div>
                            <ng-template #nopromo>${{item.subTotal}} </ng-template>
                          </div>
                        
                        </ion-col>
                      </ion-row>
                    </div>
                    </ion-grid>
                    
                  </ion-card-subtitle>
              </ion-card-content>
            </ion-card>
          <!-- </ion-col> -->
        <!-- </ion-row> -->
      <!-- </div> -->
      <br/><br/><br/>
     <ion-grid>
      <ion-row>
        <ion-col size="12">
            <ion-button color="dark" expand="block" (click)= "logout()">
              Log Out 
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
  </div>
  
  
  <div *ngIf=!isLogin style="text-align: center" >
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <h3><i><b>hi there.</b></i></h3>
    <br/>
    <h5>Welcome back!</h5>
    <!-- <div class=buttons> -->
        <ion-button color="light" [routerLink]="['/login']" expand="full">
          Log In
        </ion-button>
    <!-- </div> <br> -->
    <h5>If you're new, join us here <ion-icon ios="ios-arrow-round-down" md="md-arrow-round-down"></ion-icon></h5>
      <ion-button color="light" [routerLink]="['/register']" expand="full">
        Sign Up
      </ion-button>
    
  </div>
</ion-content>





<app-footer></app-footer>